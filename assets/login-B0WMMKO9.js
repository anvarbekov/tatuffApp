import{c as r,r as m,e as b,m as v,a as w}from"./index-BA3j53iW.js";import{u as y}from"./index-M6AcLWsh.js";import{e as h,u as k,r as x,o as d,c,a as s,f as p,v as P,n as u,t as g,j as _,k as $,b as C,w as V}from"./index-B1jx4BVc.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={name:"login",data(){return{showPassword:!1,user:{login:"",parol:""}}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},errorToast(){this.toast.error("Login yoki parol xato",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},async loginFunction(){if(this.v$.user.$touch(),this.v$.user.$invalid){window.scrollTo({top:0,behavior:"smooth"});return}const n={headers:{"Content-Type":"multipart/form-data"}};try{const t=await h.post("login",this.user,n);if(t.data.status===!0){const e=await h.get(`https://zoyirbek.pro/api/odamlar.php?login=${this.user.login}&token=${t.data.token}`);if(e.status===200){const o={id:e.data.data.id,ism:e.data.data.ism,familiya:e.data.data.familiya,kasblar_id:e.data.data.kasblar_id,login:e.data.data.login,token:e.data.data.token};localStorage.setItem("lokalUser",JSON.stringify(o)),this.$router.push("/")}}else this.errorToast()}catch(t){this.errorToast(),console.error(t.message)}}},validations:{user:{login:{required:r.withMessage("Yozilishi shart",m),email:r.withMessage("Email manzilingiz noto'g'ri",b)},parol:{required:r.withMessage("Yozilishi shart",m),minLength:r.withMessage("3 ta belgidan ko'p  bo'lishi kerak",v(3)),maxLength:r.withMessage("100 ta belgidan kam bo'lishi kerak",w(100))}}},setup(){const n=y(),t=k();return{v$:n,toast:t}}},T={class:"container-xxl"},B={class:"authentication-wrapper authentication-basic container-p-y"},L={class:"authentication-inner"},O={class:"card"},S={class:"card-body"},U=s("div",{class:"app-brand justify-content-center"},[s("span",{class:"app-brand-text demo text-body fw-bolder"},"Sneat")],-1),q=s("h4",{class:"mb-2"},"Welcome to Sneat! ğŸ‘‹",-1),E=s("p",{class:"mb-4"},"Please sign-in to your account and start the adventure",-1),F={class:"mb-3"},N=s("label",{for:"email",class:"form-label"},"Email",-1),j={key:0,class:"invalid-input-text"},D={class:"mb-3 form-password-toggle"},H=s("div",{class:"d-flex justify-content-between"},[s("label",{class:"form-label",for:"password"},"Parol")],-1),Y={class:"input-group input-group-merge"},A=["type"],I={key:0,class:"invalid-input-text"},J={class:"mb-3"},K={class:"text-center"},R=s("span",{class:"me-2"},"Akkauntingiz yo'qmi?",-1),W=s("span",null,"Ro'yhatdan o'ting",-1);function G(n,t,e,o,i,l){const f=x("router-link");return d(),c("div",T,[s("div",B,[s("div",L,[s("div",O,[s("div",S,[U,q,E,s("div",F,[N,p(s("input",{type:"text",class:u(["form-control",{"invalid-input":o.v$.user.login.$error}]),id:"email",name:"email-username","onUpdate:modelValue":t[0]||(t[0]=a=>i.user.login=a),placeholder:"Enter your email or username",autofocus:""},null,2),[[P,i.user.login]]),o.v$.user.login.$error?(d(),c("div",j,g(o.v$.user.login.$errors[0].$message),1)):_("",!0)]),s("div",D,[H,s("div",Y,[p(s("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>i.user.parol=a),type:i.showPassword?"text":"password",id:"password",class:u(["form-control",{"invalid-input-password":o.v$.user.parol.$error}]),name:"password",placeholder:"******","aria-describedby":"password"},null,10,A),[[$,i.user.parol]]),s("span",{onClick:t[2]||(t[2]=(...a)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...a)),class:"input-group-text cursor-pointer"},[s("i",{class:u(i.showPassword?"fa-solid fa-eye-slash":"fa-solid fa-eye")},null,2)]),o.v$.user.parol.$error?(d(),c("div",I,g(o.v$.user.parol.$errors[0].$message),1)):_("",!0)])]),s("div",J,[s("button",{onClick:t[3]||(t[3]=(...a)=>l.loginFunction&&l.loginFunction(...a)),class:"btn btn-primary d-grid w-100",type:"submit"},"Kirish")]),s("p",K,[R,C(f,{to:"/auth/register",href:"auth-register-basic.html"},{default:V(()=>[W]),_:1})])])])])])])}const ts=z(M,[["render",G]]);export{ts as default};
