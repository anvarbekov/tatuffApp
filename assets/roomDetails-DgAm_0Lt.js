import{e as n,u as b,r as _,o as d,c,a as t,t as l,f as u,v as m,F as p,g,b as f,w as y,h as v}from"./index-B1jx4BVc.js";import{u as k}from"./index-M6AcLWsh.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={name:"roomDetails",props:["seoXonaId"],data(){return{lokalUser:"",addRoom:{nomi:"",raqami:0,user_id:0,masul_shaxs:""},roomFurnitureList:[],roomData:{id:"0",user_id:"0",masul_shaxs:"0",raqami:"0",nomi:"0"}}},methods:{async getRooms(){try{const o=await n.get("honalar?id="+this.seoXonaId+"&token="+this.lokalUser.token);o.status===200&&(this.roomData=o.data.data)}catch(o){console.error(o.message)}},async getFurnitureRoom(){this.roomFurnitureList=[];try{const o=await n.get("hona_jihozlari.php?hona_id="+this.seoXonaId+"&token="+this.lokalUser.token);o.status===200&&(this.roomFurnitureList=o.data.data,console.log(o.data))}catch(o){console.error(o.message)}},async createRoom(){this.addRoom.user_id=Number(this.lokalUser.id);const o={headers:{"Content-Type":"multipart/form-data"}};try{(await n.post("honalar.php?token="+this.lokalUser.token,this.addRoom,o)).data.status?(await this.getRooms(),this.createRoomToast()):this.errorToast()}catch(s){this.errorToast(),console.error(s.message)}},async deleteRoom(o){try{(await n.get("delete?honalar&id="+o+"&token="+this.lokalUser.token)).data.status&&(await this.getRooms(),this.successRoomToast())}catch(s){this.errorToast(),console.error(s.message)}},createRoomToast(){this.toast.success("Xona muvaffaqiyatli yaratildi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},successRoomToast(){this.toast.success(" muvaffaqiyatli bajarildi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},errorToast(){this.toast.error("Xatolik yuz berdi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})}},setup(){const o=k(),s=b();return{v$:o,toast:s}},async mounted(){this.lokalUser=JSON.parse(localStorage.getItem("lokalUser")),await this.getRooms(),await this.getFurnitureRoom()}},w={class:"content-wrapper"},q={class:"container-xxl flex-grow-1 container-p-y"},C={class:"fw-bold py-3 mb-4"},D={class:"card"},O=t("div",{class:"card-header d-flex justify-content-between"},[t("h5",{class:""},"Xona jihozlari"),t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addRoomModal"}," Xona qo'shish ")],-1),X={class:"modal fade",id:"addRoomModal",tabindex:"-1","aria-labelledby":"addRoomModalLabel","aria-hidden":"true"},B={class:"modal-dialog modal-dialog-centered"},M={class:"modal-content"},T=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"addRoomModalLabel"},"Modal title"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),L={class:"modal-body"},U=t("label",null," Xona nomi ",-1),F=t("label",null," Xona Raqami ",-1),H=t("label",null," Masul shaxslar ",-1),V={class:"modal-footer"},P=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Bekor qilish",-1),I={class:"card-body"},N={class:"table-responsive text-nowrap"},j={class:"table table-bordered"},z=t("thead",null,[t("tr",null,[t("th",null,"Xona nomi"),t("th",null,"Xona raqami"),t("th",null,"Maxsus shaxslar"),t("th",null,"Tahrirlash")])],-1),S=t("button",{class:"badge badge-center bg-warning btn me-3"},[t("i",{class:"fa-solid fa-pen-to-square"})],-1),E=["data-bs-target"],J=t("i",{class:"fa-solid fa-trash"},null,-1),Y=[J],A=["id","aria-labelledby"],G={class:"modal-dialog"},K={class:"modal-content"},Q={class:"modal-header"},W=["id"],Z=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$={class:"modal-body"},tt={class:"modal-footer"},ot=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Yo'q",-1),st=["onClick"];function at(o,s,et,lt,e,r){const h=_("router-link");return d(),c("div",w,[t("div",q,[t("h4",C," Xona nomi: "+l(e.roomData.nomi)+" || Raqami: "+l(e.roomData.raqami)+" || Masul shaxs: "+l(e.roomData.masul_shaxs),1),t("div",D,[O,t("div",X,[t("div",B,[t("div",M,[T,t("div",L,[U,u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>e.addRoom.nomi=a),type:"text",class:"form-control"},null,512),[[m,e.addRoom.nomi]]),F,u(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>e.addRoom.raqami=a),type:"number",class:"form-control"},null,512),[[m,e.addRoom.raqami]]),H,u(t("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>e.addRoom.masul_shaxs=a),type:"text",class:"form-control"},null,512),[[m,e.addRoom.masul_shaxs]])]),t("div",V,[P,t("button",{onClick:s[3]||(s[3]=(...a)=>r.createRoom&&r.createRoom(...a)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Saqlash")])])])]),t("div",I,[t("div",N,[t("table",j,[z,t("tbody",null,[(d(!0),c(p,null,g(o.roomList,(a,i)=>(d(),c("tr",{key:i},[t("td",null,[f(h,{to:{name:"roomDetails",params:{seoXonaId:a.id}},class:"text-decoration-underline"},{default:y(()=>[v(l(a.nomi),1)]),_:2},1032,["to"])]),t("td",null,l(a.raqami),1),t("td",null,l(a.masul_shaxs),1),t("td",null,[S,t("button",{class:"btn badge badge-center bg-danger","data-bs-toggle":"modal","data-bs-target":"#roomDeleteModal_"+i},Y,8,E),t("div",{class:"modal fade",id:"roomDeleteModal_"+i,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"roomDeleteModalLabel_"+i,"aria-hidden":"true"},[t("div",G,[t("div",K,[t("div",Q,[t("h1",{class:"modal-title fs-5",id:"roomDeleteModalLabel_"+i},"Xona O'chirish",8,W),Z]),t("div",$,[t("h4",null,l(a.nomi)+" ni xonani o'chirishni xoxlaysizmi?",1)]),t("div",tt,[ot,t("button",{type:"button",class:"btn btn-primary",onClick:it=>r.deleteRoom(a.id),"data-bs-dismiss":"modal"},"Ha",8,st)])])])],8,A)])]))),128))])])])])])])])}const ct=R(x,[["render",at]]);export{ct as default};
