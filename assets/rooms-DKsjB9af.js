import{e as d,u as b,r as _,o as i,c,a as t,f as u,v as m,F as p,g,b as f,w as y,h as v,t as n}from"./index-B1jx4BVc.js";import{u as k}from"./index-M6AcLWsh.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={name:"rooms",data(){return{lokalUser:"",addRoom:{nomi:"",raqami:0,user_id:0,masul_shaxs:""},roomList:[]}},methods:{async getRooms(){this.roomList=[];try{const a=await d.get("honalar?token="+this.lokalUser.token);a.status===200&&(this.roomList=a.data.data,console.log(this.roomList))}catch(a){console.error(a.message)}},async createRoom(){this.addRoom.user_id=Number(this.lokalUser.id);const a={headers:{"Content-Type":"multipart/form-data"}};try{(await d.post("honalar.php?token="+this.lokalUser.token,this.addRoom,a)).data.status?(await this.getRooms(),this.createRoomToast()):this.errorToast()}catch(s){this.errorToast(),console.error(s.message)}},async deleteRoom(a){try{(await d.get("delete?honalar&id="+a+"&token="+this.lokalUser.token)).data.status&&(await this.getRooms(),this.successRoomToast())}catch(s){this.errorToast(),console.error(s.message)}},createRoomToast(){this.toast.success("Xona muvaffaqiyatli yaratildi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},successRoomToast(){this.toast.success(" muvaffaqiyatli bajarildi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})},errorToast(){this.toast.error("Xatolik yuz berdi",{position:"top-right",timeout:1800,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1})}},setup(){const a=k(),s=b();return{v$:a,toast:s}},async mounted(){this.lokalUser=JSON.parse(localStorage.getItem("lokalUser")),await this.getRooms()}},w={class:"content-wrapper"},C={class:"container-xxl flex-grow-1 container-p-y"},O=t("h4",{class:"fw-bold py-3 mb-4"}," Xonalar ",-1),q={class:"card"},B=t("div",{class:"card-header d-flex justify-content-between"},[t("h5",{class:""},"Xonalar"),t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addRoomModal"}," Xona qo'shish ")],-1),L={class:"modal fade",id:"addRoomModal",tabindex:"-1","aria-labelledby":"addRoomModalLabel","aria-hidden":"true"},T={class:"modal-dialog modal-dialog-centered"},M={class:"modal-content"},X=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"addRoomModalLabel"},"Modal title"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U={class:"modal-body"},D=t("label",null," Xona nomi ",-1),H=t("label",null," Xona Raqami ",-1),V=t("label",null," Masul shaxslar ",-1),P={class:"modal-footer"},F=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Bekor qilish",-1),N={class:"card-body"},S={class:"table-responsive text-nowrap"},j={class:"table table-bordered"},z=t("thead",null,[t("tr",null,[t("th",null,"Xona nomi"),t("th",null,"Xona raqami"),t("th",null,"Maxsus shaxslar"),t("th",null,"Tahrirlash")])],-1),I=t("button",{class:"badge badge-center bg-warning btn me-3"},[t("i",{class:"fa-solid fa-pen-to-square"})],-1),E=["data-bs-target"],J=t("i",{class:"fa-solid fa-trash"},null,-1),Y=[J],A=["id","aria-labelledby"],G={class:"modal-dialog"},K={class:"modal-content"},Q={class:"modal-header"},W=["id"],Z=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$={class:"modal-body"},tt={class:"modal-footer"},st=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Yo'q",-1),ot=["onClick"];function at(a,s,et,lt,e,r){const h=_("router-link");return i(),c("div",w,[t("div",C,[O,t("div",q,[B,t("div",L,[t("div",T,[t("div",M,[X,t("div",U,[D,u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.addRoom.nomi=o),type:"text",class:"form-control"},null,512),[[m,e.addRoom.nomi]]),H,u(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>e.addRoom.raqami=o),type:"number",class:"form-control"},null,512),[[m,e.addRoom.raqami]]),V,u(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>e.addRoom.masul_shaxs=o),type:"text",class:"form-control"},null,512),[[m,e.addRoom.masul_shaxs]])]),t("div",P,[F,t("button",{onClick:s[3]||(s[3]=(...o)=>r.createRoom&&r.createRoom(...o)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"},"Saqlash")])])])]),t("div",N,[t("div",S,[t("table",j,[z,t("tbody",null,[(i(!0),c(p,null,g(e.roomList,(o,l)=>(i(),c("tr",{key:l},[t("td",null,[f(h,{to:{name:"roomDetails",params:{seoXonaId:o.id}},class:"text-decoration-underline"},{default:y(()=>[v(n(o.nomi),1)]),_:2},1032,["to"])]),t("td",null,n(o.raqami),1),t("td",null,n(o.masul_shaxs),1),t("td",null,[I,t("button",{class:"btn badge badge-center bg-danger","data-bs-toggle":"modal","data-bs-target":"#roomDeleteModal_"+l},Y,8,E),t("div",{class:"modal fade",id:"roomDeleteModal_"+l,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"roomDeleteModalLabel_"+l,"aria-hidden":"true"},[t("div",G,[t("div",K,[t("div",Q,[t("h1",{class:"modal-title fs-5",id:"roomDeleteModalLabel_"+l},"Xona O'chirish",8,W),Z]),t("div",$,[t("h4",null,n(o.nomi)+" ni xonani o'chirishni xoxlaysizmi?",1)]),t("div",tt,[st,t("button",{type:"button",class:"btn btn-primary",onClick:nt=>r.deleteRoom(o.id),"data-bs-dismiss":"modal"},"Ha",8,ot)])])])],8,A)])]))),128))])])])])])])])}const ct=R(x,[["render",at]]);export{ct as default};
